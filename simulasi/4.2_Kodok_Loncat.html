<!-- Peta Kodok Loncat-->
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Ajar Interaktif: Loncatan Kodok (Dynamic Programming)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* bg-gray-100 */
        }
        .map-grid {
            display: grid;
            grid-template-columns: repeat(var(--grid-cols, 8), 1fr);
            gap: 4px;
        }
        .box {
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #1f2937; /* text-gray-800 */
            position: relative;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.3s;
            border-radius: 8px;
        }
        .box:hover {
            transform: scale(1.05);
        }
        .box.start, .box.end {
            cursor: not-allowed;
        }
        .box .dp-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            font-size: 0.875rem;
            font-weight: 700;
            color: white;
            background-color: rgba(0, 0, 0, 0.6);
            width: 1.75rem;
            height: 1.75rem;
            border-radius: 9999px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
            text-shadow: none;
        }
        .frog-icon, .flag-icon {
            width: 70%;
            height: 70%;
            object-fit: contain;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="text-gray-800 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-5xl mx-auto bg-white p-6 rounded-2xl shadow-2xl">
        <header class="text-center mb-6">
            <h1 class="text-3xl font-bold text-indigo-600">Media Ajar Interaktif: Loncatan Kodok</h1>
            <p class="text-gray-600 mt-2">Visualisasi solusi Dynamic Programming untuk masalah jalur kodok.</p>
        </header>

        <!-- Bagian Kontrol dan Pengaturan -->
        <div class="grid md:grid-cols-2 gap-6 bg-gray-50 p-6 rounded-lg mb-6 border border-gray-200">
            <div class="space-y-4">
                <div>
                    <label for="boxCount" class="block text-sm font-medium text-gray-700 mb-1">1. Jumlah Kotak</label>
                    <input type="number" id="boxCount" value="8" min="3" max="20" class="w-full bg-white border border-gray-300 rounded-md p-2 text-gray-900 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                </div>
                 <div>
                    <label for="maxSteps" class="block text-sm font-medium text-gray-700 mb-1">2. Langkah Maksimal Katak</label>
                    <input type="number" id="maxSteps" value="3" min="1" class="w-full bg-white border border-gray-300 rounded-md p-2 text-gray-900 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                </div>
            </div>
            <div class="space-y-4">
                 <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">3. Penempatan Rintangan</label>
                    <div class="flex items-center space-x-4 bg-gray-100 p-3 rounded-md">
                        <input id="randomObstacles" type="checkbox" class="h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                        <label for="randomObstacles" class="text-sm">Buat Rintangan Acak</label>
                    </div>
                     <p class="text-xs text-gray-500 mt-2">Atau, klik kotak di peta secara manual untuk menjadikannya rintangan setelah peta ditampilkan.</p>
                </div>
            </div>
        </div>

        <div class="flex justify-center mb-6">
            <button id="generateMapBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-lg shadow-md transition-transform transform hover:scale-105">
                Tampilkan Peta
            </button>
        </div>

        <!-- Wadah untuk Peta -->
        <div id="mapContainer" class="mb-6">
             <div class="text-center text-gray-500 p-8 border-2 border-dashed border-gray-300 rounded-lg">
                Atur parameter di atas dan klik "Tampilkan Peta" untuk memulai.
            </div>
        </div>
        
        <!-- Bagian Jawaban dan Solusi -->
        <div id="solutionContainer" class="hidden mt-6 space-y-4 text-center fade-in">
            <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                <p class="text-lg mb-4 text-gray-800">Menurut Anda, berapa banyak cara yang bisa dilakukan si kodok?</p>
                <div class="flex justify-center items-center gap-3">
                    <input type="number" id="userAnswer" placeholder="Jawaban..." class="bg-white border border-gray-300 rounded-md p-2 text-gray-900 w-36 text-center focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    <button id="checkAnswerBtn" class="bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-2 px-5 rounded-lg transition-colors text-sm">Cek Jawaban</button>
                </div>
                 <div id="feedbackMessage" class="mt-4 h-6 text-lg font-medium"></div>
            </div>

            <div class="flex justify-center">
                <button id="showDpBtn" class="bg-violet-600 hover:bg-violet-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors">
                    Tampilkan Solusi DP
                </button>
            </div>
        </div>

    </div>

    <script>
        // --- Ikon SVG sebagai string untuk kemudahan ---
        const frogSVG = <svg class="frog-icon" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><path fill="#84cc16" d="M165.7,-20.9C180.2,1.8,181.1,32,165.8,55.1C150.5,78.2,119,94.2,87.9,103.2C56.9,112.2,26.2,114.3,-2,114.7C-30.2,115.1,-60.4,113.8,-84.3,100.5C-108.2,87.2,-125.8,61.9,-132.8,35.1C-139.9,8.3,-136.4,-20,-121.2,-41.8C-106,-63.5,-79.1,-78.7,-53,-86.3C-26.9,-93.8,-1.7,-93.8,24.4,-88.4C50.5,-83,77.4,-72.2,103.2,-56.3C129,-40.4,151.2,-19.4,165.7,-2.9L165.7,-20.9Z" transform="translate(100 100)" /></svg>;
        const flagSVG = <svg class="flag-icon" fill="#1f2937" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M6 28v-28h2v28h-2zM24.561 15.345l-10.8-7.2c-0.453-0.302-1.025-0.34-1.517-0.099s-0.844 0.69-0.844 1.255v13.4c0 0.565 0.355 1.064 0.844 1.255 0.222 0.086 0.457 0.128 0.69 0.128 0.287 0 0.572-0.076 0.828-0.229l10.8-7.2c0.413-0.275 0.659-0.734 0.659-1.228s-0.246-0.953-0.659-1.228zM13.4 20.303v-9.406l7.054 4.703-7.054 4.703z"></path></svg>;

        // --- Variabel State Aplikasi ---
        let boxCount = 8;
        let maxSteps = 3;
        let obstacles = new Set();
        let dpSolution = [];
        let correctAnswer = 0;

        // --- Referensi Elemen DOM ---
        const boxCountInput = document.getElementById('boxCount');
        const maxStepsInput = document.getElementById('maxSteps');
        const randomObstaclesCheckbox = document.getElementById('randomObstacles');
        const generateMapBtn = document.getElementById('generateMapBtn');
        const mapContainer = document.getElementById('mapContainer');
        const solutionContainer = document.getElementById('solutionContainer');
        const userAnswerInput = document.getElementById('userAnswer');
        const checkAnswerBtn = document.getElementById('checkAnswerBtn');
        const feedbackMessage = document.getElementById('feedbackMessage');
        const showDpBtn = document.getElementById('showDpBtn');
        
        // --- Fungsi Utama ---

        function generateMap() {
            boxCount = parseInt(boxCountInput.value);
            maxSteps = parseInt(maxStepsInput.value);

            if (maxSteps >= boxCount - 1) {
                alert(Langkah maksimal (${maxSteps}) harus lebih kecil dari (Jumlah Kotak - 1), yaitu ${boxCount - 1}.);
                return;
            }
            if(boxCount > 20 || boxCount < 3) {
                alert('Jumlah kotak harus di antara 3 dan 20.');
                return;
            }

            obstacles.clear();
            mapContainer.innerHTML = '';
            feedbackMessage.textContent = '';
            userAnswerInput.value = '';
            solutionContainer.classList.add('hidden');

            if (randomObstaclesCheckbox.checked) {
                const maxObstacles = Math.floor(boxCount * 0.3);
                const obstacleCount = Math.floor(Math.random() * maxObstacles) + 1;
                
                while (obstacles.size < obstacleCount) {
                    const pos = Math.floor(Math.random() * (boxCount - 2)) + 1;
                    obstacles.add(pos);
                }
            }

            mapContainer.style.setProperty('--grid-cols', boxCount);
            mapContainer.classList.add('map-grid');

            for (let i = 0; i < boxCount; i++) {
                const box = document.createElement('div');
                box.dataset.index = i;
                box.classList.add('box');

                if (i === 0) {
                    box.innerHTML = frogSVG;
                    box.classList.add('start', 'bg-lime-500');
                } else if (i === boxCount - 1) {
                    box.innerHTML = flagSVG;
                    box.classList.add('end', 'bg-indigo-500');
                } else {
                    if (obstacles.has(i)) {
                        box.classList.add('obstacle', 'bg-rose-400');
                    } else {
                        box.classList.add('path', 'bg-stone-300');
                    }
                }
                mapContainer.appendChild(box);
            }
            
            solutionContainer.classList.remove('hidden');
            calculateDPCorrectAnswer();
        }

        function calculateDPCorrectAnswer() {
            dpSolution = new Array(boxCount).fill(0);
            if (!obstacles.has(0)) {
                dpSolution[0] = 1;
            }

            for (let i = 1; i < boxCount; i++) {
                if (obstacles.has(i)) {
                    dpSolution[i] = 0;
                    continue;
                }
                for (let step = 1; step <= maxSteps; step++) {
                    const prevIndex = i - step;
                    if (prevIndex >= 0) {
                        dpSolution[i] += dpSolution[prevIndex];
                    }
                }
            }
            correctAnswer = dpSolution[boxCount - 1];
            console.log("Jawaban yang Benar:", correctAnswer);
            console.log("Tabel DP:", dpSolution);
        }

        function handleBoxClick(e) {
            const box = e.target.closest('.box');
            if (!box) return;

            const index = parseInt(box.dataset.index);
            if (index === 0 || index === boxCount - 1) return;

            if (obstacles.has(index)) {
                obstacles.delete(index);
                box.classList.remove('bg-rose-400', 'obstacle');
                box.classList.add('bg-stone-300', 'path');
            } else {
                obstacles.add(index);
                box.classList.remove('bg-stone-300', 'path');
                box.classList.add('bg-rose-400', 'obstacle');
            }
            
            calculateDPCorrectAnswer();
            clearDpDisplay();
        }

        function checkUserAnswer() {
            const userAnswer = parseInt(userAnswerInput.value);
            if (isNaN(userAnswer)) {
                feedbackMessage.textContent = 'Masukkan jawaban berupa angka.';
                feedbackMessage.className = 'mt-4 h-6 text-lg font-medium text-amber-600';
                return;
            }

            if (userAnswer === correctAnswer) {
                feedbackMessage.textContent = 'Benar! Jawaban Anda Tepat.';
                feedbackMessage.className = 'mt-4 h-6 text-lg font-medium text-emerald-600';
            } else {
                feedbackMessage.textContent = 'Salah. Coba hitung lagi!';
                feedbackMessage.className = 'mt-4 h-6 text-lg font-medium text-red-600';
            }
        }
        
        function showDpSolution() {
            clearDpDisplay();
            const boxes = document.querySelectorAll('.box');
            boxes.forEach((box, index) => {
                const dpValue = dpSolution[index];
                const valueEl = document.createElement('div');
                valueEl.classList.add('dp-value', 'fade-in');
                valueEl.textContent = dpValue;
                box.appendChild(valueEl);
            });
        }

        function clearDpDisplay() {
            document.querySelectorAll('.dp-value').forEach(el => el.remove());
        }

        // --- Event Listeners ---
        generateMapBtn.addEventListener('click', generateMap);
        mapContainer.addEventListener('click', handleBoxClick);
        checkAnswerBtn.addEventListener('click', checkUserAnswer);
        showDpBtn.addEventListener('click', showDpSolution);
        userAnswerInput.addEventListener('keyup', (e) => {
             if (e.key === 'Enter') {
                checkUserAnswer();
             }
        });
    </script>
</body>
</html>
